<!DOCTYPE html>
<html lang="en">
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="../../../favicon.ico">
  <link rel="stylesheet" href="../../../mccole.css">
  <link rel="stylesheet" href="../../../tango.css">
  <script>
    MathJax = {
      tex: {
        inlineMath: [['\\(', '\\)']]
      }
    };
  </script>
  <script
    type="text/javascript"
    id="MathJax-script"
    async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <title>Software Design by Example</title>
</head>

  <body>
    <div class="row">
      <div class="column">
        <p>
  <img src="../../../logo.svg" alt="site logo" width="10%" />
  <a href="../../../">Software Design by Example</a>
</p>
<ol class="toc-chapter">
  
  <li>
    <a href="../../../introduction/">
      Introduction
    </a>
  </li>
  
  <li>
    <a href="../../../systems-programming/">
      Systems Programming
    </a>
  </li>
  
  <li>
    <a href="../../../async-programming/">
      Asynchronous Programming
    </a>
  </li>
  
  <li>
    <a href="../../../unit-test/">
      Unit Testing
    </a>
  </li>
  
  <li>
    <a href="../../../file-backup/">
      File Backup
    </a>
  </li>
  
  <li>
    <a href="../../../data-table/">
      Data Tables
    </a>
  </li>
  
  <li>
    <a href="../../../pattern-matching/">
      Pattern Matching
    </a>
  </li>
  
  <li>
    <a href="../../../regex-parser/">
      Parsing Expressions
    </a>
  </li>
  
  <li>
    <a href="../../../page-templates/">
      Page Templates
    </a>
  </li>
  
  <li>
    <a href="../../../build-manager/">
      Build Manager
    </a>
  </li>
  
  <li>
    <a href="../../../layout-engine/">
      Layout Engine
    </a>
  </li>
  
  <li>
    <a href="../../../file-interpolator/">
      File Interpolator
    </a>
  </li>
  
  <li>
    <a href="../../../module-loader/">
      Module Loader
    </a>
  </li>
  
  <li>
    <a href="../../../style-checker/">
      Style Checker
    </a>
  </li>
  
  <li>
    <a href="../../../code-generator/">
      Code Generator
    </a>
  </li>
  
  <li>
    <a href="../../../doc-generator/">
      Documentation Generator
    </a>
  </li>
  
  <li>
    <a href="../../../module-bundler/">
      Module Bundler
    </a>
  </li>
  
  <li>
    <a href="../../../package-manager/">
      Package Manager
    </a>
  </li>
  
  <li>
    <a href="../../../virtual-machine/">
      Virtual Machine
    </a>
  </li>
  
  <li>
    <a href="../../../debugger/">
      Debugger
    </a>
  </li>
  
  <li>
    <a href="../../../conclusion/">
      Conclusion
    </a>
  </li>
  
</ol>
<ol class="toc-appendix">
  
  <li>
    <a href="../../../license/">
      License
    </a>
  </li>
  
  <li>
    <a href="../../../conduct/">
      Code of Conduct
    </a>
  </li>
  
  <li>
    <a href="../../../contributing/">
      Contributing
    </a>
  </li>
  
  <li>
    <a href="../../../bibliography/">
      Bibliography
    </a>
  </li>
  
  <li>
    <a href="../../../glossary/">
      Glossary
    </a>
  </li>
  
  <li>
    <a href="../../../credits/">
      Credits
    </a>
  </li>
  
  <li>
    <a href="../../../contents/">
      Index
    </a>
  </li>
  
</ol>

      </div>
      <div id="printable" class="column bordered">
        <main>
	  
  <h1>Software Design by Example</h1>
  <h2><em>a tool-based introduction with JavaScript</em></h2>


          

	  
  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  


          import assert from 'assert'

import {
  WrappedBlock as Block,
  WrappedCol as Col,
  WrappedRow as Row
} from '../wrapped.js'

describe('wraps blocks', () => {
  it('wraps a single unit block', async () => {
    const fixture = new Block(1, 1)
    const wrapped = fixture.wrap()
    wrapped.place(0, 0)
    assert.deepStrictEqual(
      wrapped.report(),
      ['block', 0, 0, 1, 1]
    )
  })

  it('wraps a large block', async () => {
    const fixture = new Block(3, 4)
    const wrapped = fixture.wrap()
    wrapped.place(0, 0)
    assert.deepStrictEqual(
      wrapped.report(),
      ['block', 0, 0, 3, 4]
    )
  })

  it('wrap a row of two blocks that fit on one row', async () => {
    const fixture = new Row(
      100,
      new Block(1, 1),
      new Block(2, 4)
    )
    const wrapped = fixture.wrap()
    wrapped.place(0, 0)
    assert.deepStrictEqual(
      wrapped.report(),
      ['row', 0, 0, 3, 4,
        ['col', 0, 0, 3, 4,
          ['row', 0, 0, 3, 4,
            ['block', 0, 3, 1, 4],
            ['block', 1, 0, 3, 4]
          ]
        ]
      ]
    )
  })

  it('wraps a column of two blocks', async () => {
    const fixture = new Col(
      new Block(1, 1),
      new Block(2, 4)
    )
    const wrapped = fixture.wrap()
    wrapped.place(0, 0)
    assert.deepStrictEqual(
      wrapped.report(),
      ['col', 0, 0, 2, 5,
        ['block', 0, 0, 1, 1],
        ['block', 0, 1, 2, 5]
      ]
    )
  })

  it('wraps a grid of rows of columns that all fit on their row', async () => {
    const fixture = new Col(
      new Row(
        100,
        new Block(1, 2),
        new Block(3, 4)
      ),
      new Row(
        100,
        new Block(5, 6),
        new Col(
          new Block(7, 8),
          new Block(9, 10)
        )
      )
    )
    const wrapped = fixture.wrap()
    wrapped.place(0, 0)
    assert.deepStrictEqual(
      wrapped.report(),
      ['col', 0, 0, 14, 22,
        ['row', 0, 0, 4, 4,
          ['col', 0, 0, 4, 4,
            ['row', 0, 0, 4, 4,
              ['block', 0, 2, 1, 4],
              ['block', 1, 0, 4, 4]
            ]
          ]
        ],
        ['row', 0, 4, 14, 22,
          ['col', 0, 4, 14, 22,
            ['row', 0, 4, 14, 22,
              ['block', 0, 16, 5, 22],
              ['col', 5, 4, 14, 22,
                ['block', 5, 4, 12, 12],
                ['block', 5, 12, 14, 22]
              ]
            ]
          ]
        ]
      ]
    )
  })

  // [example]
  it('wrap a row of two blocks that do not fit on one row', async () => {
    const fixture = new Row(
      3,
      new Block(2, 1),
      new Block(2, 1)
    )
    const wrapped = fixture.wrap()
    wrapped.place(0, 0)
    assert.deepStrictEqual(
      wrapped.report(),
      ['row', 0, 0, 2, 2,
        ['col', 0, 0, 2, 2,
          ['row', 0, 0, 2, 1,
            ['block', 0, 0, 2, 1]
          ],
          ['row', 0, 1, 2, 2,
            ['block', 0, 1, 2, 2]
          ]
        ]
      ]
    )
  })
  // [/example]

  it('wrap multiple blocks that do not fit on one row', async () => {
    const fixture = new Row(
      3,
      new Block(2, 1),
      new Block(2, 1),
      new Block(1, 1),
      new Block(2, 1)
    )
    const wrapped = fixture.wrap()
    wrapped.place(0, 0)
    assert.deepStrictEqual(
      wrapped.report(),
      ['row', 0, 0, 3, 3,
        ['col', 0, 0, 3, 3,
          ['row', 0, 0, 2, 1,
            ['block', 0, 0, 2, 1]
          ],
          ['row', 0, 1, 3, 2,
            ['block', 0, 1, 2, 2],
            ['block', 2, 1, 3, 2]
          ],
          ['row', 0, 2, 2, 3,
            ['block', 0, 2, 2, 3]
          ]
        ]
      ]
    )
  })
})

        </main>
      </div>
    </div>
  </body>
</html>
